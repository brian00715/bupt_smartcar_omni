# 十六届智能车全向行进组别

## 工作日志

---

Date：2021/04/10

### 1. 确定选择全向行进组别

### 2. 硬件购买清单

主要配件

| 项目               | 型号                                                         |
| ------------------ | ------------------------------------------------------------ |
| 主控               | 逐飞：CH32V103核心板\*3；CH32V103双核母版学习板\*1；单核学习板\*1（用于摄像头调试） |
| 下载器             | 逐飞：*2                                                     |
| 驱动板             | 逐飞：DRV8701E双路驱动板*2                                   |
| H车模              | 龙邱：钻石升级版+锂电池+充电器                               |
| 编码器支架         | 龙邱：H板支架配合老款光电编码器*4                            |
| 加速度计           | 逐飞：ICM-20602 三轴加速度+三轴陀螺仪                        |
| 磁标               | 逐飞：*4                                                     |
| 摄像头支架         | 逐飞：330mm碳杆（华杯赛要求车辆高度低于300mm）               |
| 摄像头云台安装平台 | 逐飞：便于加装舵机                                           |
| 轴承油             | 逐飞：                                                       |
| 齿轮油             | 逐飞：                                                       |

电磁循迹配件

| 项目          | 型号                                                         |
| ------------- | ------------------------------------------------------------ |
| 运放          | 龙邱：OPA4377 8路运放*2                                      |
| 电感前瞻支架  | 逐飞：H车模双杆支架                                          |
| 电感和电容    | 逐飞：方形矫正电感、6\*8工字电容、8\*10工字电容各20个        |
| 电感电容PCB板 | 逐飞：7路电感PCB（不使用集成运放的PCB，便于后期制作环形电感安装板） |
| 运放连接线    | 逐飞：                                                       |
| 干簧管        | 龙邱：*3                                                     |
| 干簧管安装板  | 龙邱：新款配线                                               |



### 3. 实现方案初步

1. 双核心设计

   用一个单片机专门用于图像处理，主从单片机之间使用UART通信。

   从单片机将车道线识别结果用DMA发送至主单片机，主单片机需要使用时直接读取某块内存。
   
2. 第一代循迹方案

   > 由于时间有限，校内赛使用差速驱动控制转向，这样可以不需要考虑环形电感与摄像头偏航角控制。

3. 第二代循迹方案

   > 充分利用麦轮的全向控制，加入环形电感、摄像头舵机偏航角控制/双摄像头。

### 4. 分工
#### 4.1 运动控制
由司马宽宽负责。
主要内容为：
>1. 主单片机有限状态机设计
>2. 驱动轮速度环控制
>3. 麦克纳姆轮运动学解算
>4. 加速度计与陀螺仪数据处理
>5. 实现电感数据与摄像头识别数据融合

#### 4.2 赛道信息处理
   由周弋迪负责。
   主要内容为：
   >   1. 从单片机有限状态机设计
   >   2. 摄像头数据处理
   >   3. 车道线识别
   >   4. 识别结果传输协议设计
   >   5. 电感数据处理与模糊PID规则表设计

#### 4.3 主控板与驱动板电路
   由艾诺舟负责。
   主要内容为：
   > 1. CH32V103双核心主控板设计
   > 2. 4路驱动板设计
   > 3. 环形电感电容PCB设计
   > 4. 电路焊接

